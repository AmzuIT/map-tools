/* gmplus.js 0.2.1 MIT License. 2015 Yago Ferrer <yago.ferrer@gmail.com> */
!function t(n,r,e){function o(u,s){if(!r[u]){if(!n[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(i)return i(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var p=r[u]={exports:{}};n[u][0].call(p.exports,function(t){var r=n[u][1][t];return o(r?r:t)},p,p.exports,t,n,r,e)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<e.length;u++)o(e[u]);return o}({1:[function(t,n){"use strict";var r=t("gmplus/utils");n.exports=function(n,e){function o(t,o){var i;t.map=e.instance,t.position=new n.google.maps.LatLng(t.lat,t.lng);var s=t.group||!1;if(o&&o.group&&(s=o.group||s),o)for(i in o)o.hasOwnProperty(i)&&(t[i]=o[i]);if(s&&GMP.maps[e.id].groupOptions&&GMP.maps[e.id].groupOptions[s])for(var a in GMP.maps[e.id].groupOptions[s])t[a]=GMP.maps[e.id].groupOptions[s][a];t.data=t.data||{},t.data&&(t.data.uid=r.createUid()),e.options.crossfilter&&e.options.crossfilter.add([t.data]);var c=new n.google.maps.Marker(t);return t.move&&c.setAnimation(t.move),t.bubble&&u.create(c,t.bubble,e.instance),s&&(GMP.maps[e.id].groups=GMP.maps[e.id].groups||{},GMP.maps[e.id].groups[s]=GMP.maps[e.id].groups[s]||[],GMP.maps[e.id].groups[s].push(c)),GMP.maps[e.id].markers=GMP.maps[e.id].markers||{},GMP.maps[e.id].markers[t.data.uid]=c,c}function i(t,n){if(t.length&&t.length>=1){var r,e=[];for(var i in t)r=o(t[i],n),e.push(r);return e}return o(t,n)}var u=t("gmplus/bubble")(n);return i}},{"gmplus/bubble":2,"gmplus/utils":11}],2:[function(t,n){"use strict";n.exports=function(t){function n(n,r,e){var o=r.event||"click";r.content=r.content.replace(/\{(\w+)\}/g,function(t,r){return n.data[r]||""}),n.bubble.instance=new t.google.maps.InfoWindow(r),t.google.maps.event.addListener(n,o,function(){n.bubble.instance.open(e,n)})}return{create:n}}},{}],3:[function(t,n){"use strict";n.exports={version:"3.exp",zoom:8,customMarkerOptions:["lat","lng","move","bubble"]}},{}],4:[function(t,n){"use strict";n.exports=function(t,n){function r(n,r){var e;if(r.custom&&(r.custom.move&&n.setAnimation(r.custom.move),r.custom.lat&&r.custom.lng&&n.setPosition(new t.google.maps.LatLng(r.custom.lat,r.custom.lng)),r.custom.bubble&&r.custom.bubble.content&&n.bubble.instance.setContent(r.custom.bubble.content)),r.setters)for(e in r.setters)r.setters.hasOwnProperty(e)&&n[e](r.setters[e]);return n}function e(t,e){return t.data&&t.data.uid?r(t,e):t.uid&&GMP.maps[n.id].markers[t.uid]?r(GMP.maps[n.id].markers[t.uid],e):void 0}return e}},{}],5:[function(t,n){(function(r){"use strict";function e(t){var n=t.version||o.version,e=r.window.document.createElement("script");return e.type="text/javascript",e.src="//maps.googleapis.com/maps/api/js?v="+n+"&callback=GMP.maps."+t.id+".create",r.window.document.body.appendChild(e)}var o=t("gmplus/config");n.exports={load:e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"gmplus/config":3}],6:[function(t,n){"use strict";var r=t("gmplus/utils"),e=t("gmplus/config");n.exports=function(n,o){function i(t,n){GMP.maps[o.id].groups=GMP.maps[o.id].groups||[],GMP.maps[o.id].groupOptions=GMP.maps[o.id].groupOptions||{},GMP.maps[o.id].groupOptions[t]=n}function u(t,n){var i,u,a=[],c=r.prepareOptions(n,e.customMarkerOptions);if(GMP.maps[o.id].groups&&GMP.maps[o.id].groups[t])for(u in GMP.maps[o.id].groups[t])GMP.maps[o.id].groups[t].hasOwnProperty(u)&&(i=s(GMP.maps[o.id].groups[t][u],c),a.push(i));return a}var s=t("gmplus/findUpdateMarker")(n,o);return{addGroup:i,updateGroup:u}}},{"gmplus/config":3,"gmplus/findUpdateMarker":4,"gmplus/utils":11}],7:[function(t,n){"use strict";n.exports=function(n){function r(r,e){var o=this;this.addMarker=t("gmplus/addMarker")(n,o),this.loadTopoJson=t("gmplus/topojson")(n,o),this.updateMarker=t("gmplus/updateMarker")(n,o),this.addGroup=t("gmplus/groups")(n,o).addGroup,this.updateGroup=t("gmplus/groups")(n,o).updateGroup;var i=t("gmplus/map")(n,o);return i.load(r,e),this}return r.prototype.instance=!1,r.prototype.bounce=1,r.prototype.drop=2,r}},{"gmplus/addMarker":1,"gmplus/groups":6,"gmplus/map":8,"gmplus/topojson":9,"gmplus/updateMarker":10}],8:[function(t,n){"use strict";var r=t("gmplus/utils"),e=t("gmplus/config"),o=t("gmplus/gmaps.js");n.exports=function(t,n){function i(o,i){i=i||function(){};var u=r.clone(o);u.zoom=o.zoom||e.zoom,u.center=new t.google.maps.LatLng(o.lat,o.lng),u.id=void 0,u.lat=void 0,u.lng=void 0,n.id=o.id,n.options=o,n.instance=new t.google.maps.Map(t.document.getElementById(o.id),u),t.GMP.maps[o.id].instance=n.instance,t.google.maps.event.addListenerOnce(n.instance,"idle",function(){i(!1,n.instance)})}function u(t,n){return!t||t&&"object"!=typeof t?(n(new Error("You must pass a valid first parameter: options")),!1):t.id||t["class"]?t.lat&&t.lng?!0:(n(new Error('You must pass valid "lat" (latitude) and "lng" (longitude) values')),!1):(n(new Error('You must pass an "id" or a "class" property values')),!1)}function s(n,r){u(n,r)&&(t.GMP.maps=GMP.maps||{},t.GMP.maps[n.id]={create:function(){i(this.arguments,r)},arguments:n},n.async!==!1||n.sync===!0?o.load(n):t.GMP.maps[n.id].create())}return{load:s}}},{"gmplus/config":3,"gmplus/gmaps.js":5,"gmplus/utils":11}],9:[function(t,n){"use strict";var r=t("topojson");n.exports=function(t,n){function e(t,r){var e,o;for(o in t)t.hasOwnProperty(o)&&(e=t[o],r.style&&n.instance.data.overrideStyle(e,r.style))}function o(t,o){var i,u,s,a;for(a in o)o.hasOwnProperty(a)&&(i=o[a],u=r.feature(t,t.objects[i.object]),s=n.instance.data.addGeoJson(u),e(s,i));return s}return o}},{topojson:13}],10:[function(t,n){"use strict";var r=t("gmplus/utils"),e=t("gmplus/config");n.exports=function(n,o){function i(t,n){var o=Object.prototype.toString.call(t),i=r.prepareOptions(n,e.customMarkerOptions);if("[object Object]"===o)return u(t,_options);if("[object Array]"===o){var s,a,c,p=[];for(c in t)t.hasOwnProperty(c)&&(s=t[c],a=u(s,i),p.push(a));return p}}var u=t("gmplus/findUpdateMarker")(n,o);return i}},{"gmplus/config":3,"gmplus/findUpdateMarker":4,"gmplus/utils":11}],11:[function(t,n){"use strict";function r(t){var n,e,o;n=Array.isArray(t)?[]:{};for(o in t)t.hasOwnProperty(o)&&(e=t[o],n[o]="object"==typeof e?r(e):e);return n}function e(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var n,r;return n=16*Math.random()|0,r="x"===t?n:3&n|8,r.toString(16)})}function o(t,n){var r,e={};for(r in t)t.hasOwnProperty(r)&&(n.indexOf(r)>-1?(e.custom=e.custom||{},e.custom[r]=t[r]):(e.setters=e.setters||{},e.setters["set"+r[0].toUpperCase()+r.slice(1)]=t[r]));return e}n.exports={clone:r,createUid:e,prepareOptions:o}},{}],12:[function(t){"use strict";window.GMP=t("gmplus/index")(window)},{"gmplus/index":7}],13:[function(t,r){!function(){function t(t,n){function r(n){var r,e=t.arcs[0>n?~n:n],o=e[0];return t.transform?(r=[0,0],e.forEach(function(t){r[0]+=t[0],r[1]+=t[1]})):r=e[e.length-1],0>n?[r,o]:[o,r]}function e(t,n){for(var r in t){var e=t[r];delete n[e.start],delete e.start,delete e.end,e.forEach(function(t){o[0>t?~t:t]=1}),s.push(e)}}var o={},i={},u={},s=[],a=-1;return n.forEach(function(r,e){var o,i=t.arcs[0>r?~r:r];i.length<3&&!i[1][0]&&!i[1][1]&&(o=n[++a],n[a]=r,n[e]=o)}),n.forEach(function(t){var n,e,o=r(t),s=o[0],a=o[1];if(n=u[s])if(delete u[n.end],n.push(t),n.end=a,e=i[a]){delete i[e.start];var c=e===n?n:n.concat(e);i[c.start=n.start]=u[c.end=e.end]=c}else i[n.start]=u[n.end]=n;else if(n=i[a])if(delete i[n.start],n.unshift(t),n.start=s,e=u[s]){delete u[e.end];var p=e===n?n:e.concat(n);i[p.start=e.start]=u[p.end=n.end]=p}else i[n.start]=u[n.end]=n;else n=[t],i[n.start=s]=u[n.end=a]=n}),e(u,i),e(i,u),n.forEach(function(t){o[0>t?~t:t]||s.push([t])}),s}function e(n,r,e){function o(t){var n=0>t?~t:t;(p[n]||(p[n]=[])).push({i:t,g:c})}function i(t){t.forEach(o)}function u(t){t.forEach(i)}function s(t){"GeometryCollection"===t.type?t.geometries.forEach(s):t.type in f&&(c=t,f[t.type](t.arcs))}var a=[];if(arguments.length>1){var c,p=[],f={LineString:i,MultiLineString:u,Polygon:u,MultiPolygon:function(t){t.forEach(u)}};s(r),p.forEach(arguments.length<3?function(t){a.push(t[0].i)}:function(t){e(t[0].g,t[t.length-1].g)&&a.push(t[0].i)})}else for(var l=0,g=n.arcs.length;g>l;++l)a.push(l);return{type:"MultiLineString",arcs:t(n,a)}}function o(r,e){function o(t){t.forEach(function(n){n.forEach(function(n){(u[n=0>n?~n:n]||(u[n]=[])).push(t)})}),a.push(t)}function i(t){return l(s(r,{type:"Polygon",arcs:[t]}).coordinates[0])>0}var u={},a=[],c=[];return e.forEach(function(t){"Polygon"===t.type?o(t.arcs):"MultiPolygon"===t.type&&t.arcs.forEach(o)}),a.forEach(function(t){if(!t._){var n=[],r=[t];for(t._=1,c.push(n);t=r.pop();)n.push(t),t.forEach(function(t){t.forEach(function(t){u[0>t?~t:t].forEach(function(t){t._||(t._=1,r.push(t))})})})}}),a.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:c.map(function(e){var o=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){u[0>t?~t:t].length<2&&o.push(t)})})}),o=t(r,o),(n=o.length)>1)for(var s,a=i(e[0][0]),c=0;c<n;++c)if(a===i(o[c])){s=o[0],o[0]=o[c],o[c]=s;break}return o})}}function i(t,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return u(t,n)})}:u(t,n)}function u(t,n){var r={type:"Feature",id:n.id,properties:n.properties||{},geometry:s(t,n)};return null==n.id&&delete r.id,r}function s(t,n){function r(t,n){n.length&&n.pop();for(var r,e=p[0>t?~t:t],o=0,i=e.length;i>o;++o)n.push(r=e[o].slice()),c(r,o);0>t&&a(n,i)}function e(t){return t=t.slice(),c(t,0),t}function o(t){for(var n=[],e=0,o=t.length;o>e;++e)r(t[e],n);return n.length<2&&n.push(n[0].slice()),n}function i(t){for(var n=o(t);n.length<4;)n.push(n[0].slice());return n}function u(t){return t.map(i)}function s(t){var n=t.type;return"GeometryCollection"===n?{type:n,geometries:t.geometries.map(s)}:n in f?{type:n,coordinates:f[n](t)}:null}var c=v(t.transform),p=t.arcs,f={Point:function(t){return e(t.coordinates)},MultiPoint:function(t){return t.coordinates.map(e)},LineString:function(t){return o(t.arcs)},MultiLineString:function(t){return t.arcs.map(o)},Polygon:function(t){return u(t.arcs)},MultiPolygon:function(t){return t.arcs.map(u)}};return s(n)}function a(t,n){for(var r,e=t.length,o=e-n;o<--e;)r=t[o],t[o++]=t[e],t[e]=r}function c(t,n){for(var r=0,e=t.length;e>r;){var o=r+e>>>1;t[o]<n?r=o+1:e=o}return r}function p(t){function n(t,n){t.forEach(function(t){0>t&&(t=~t);var r=o[t];r?r.push(n):o[t]=[n]})}function r(t,r){t.forEach(function(t){n(t,r)})}function e(t,n){"GeometryCollection"===t.type?t.geometries.forEach(function(t){e(t,n)}):t.type in u&&u[t.type](t.arcs,n)}var o={},i=t.map(function(){return[]}),u={LineString:n,MultiLineString:r,Polygon:r,MultiPolygon:function(t,n){t.forEach(function(t){r(t,n)})}};t.forEach(e);for(var s in o)for(var a=o[s],p=a.length,f=0;p>f;++f)for(var l=f+1;p>l;++l){var g,d=a[f],m=a[l];(g=i[d])[s=c(g,m)]!==m&&g.splice(s,0,m),(g=i[m])[s=c(g,d)]!==d&&g.splice(s,0,d)}return i}function f(t,n){function r(t){i.remove(t),t[1][2]=n(t),i.push(t)}var e=v(t.transform),o=h(t.transform),i=m();return n||(n=g),t.arcs.forEach(function(t){for(var u,s,a=[],c=0,p=0,f=t.length;f>p;++p)s=t[p],e(t[p]=[s[0],s[1],1/0],p);for(var p=1,f=t.length-1;f>p;++p)u=t.slice(p-1,p+2),u[1][2]=n(u),a.push(u),i.push(u);for(var p=0,f=a.length;f>p;++p)u=a[p],u.previous=a[p-1],u.next=a[p+1];for(;u=i.pop();){var l=u.previous,g=u.next;u[1][2]<c?u[1][2]=c:c=u[1][2],l&&(l.next=g,l[2]=u[2],r(l)),g&&(g.previous=l,g[0]=u[0],r(g))}t.forEach(o)}),t}function l(t){for(var n,r=-1,e=t.length,o=t[e-1],i=0;++r<e;)n=o,o=t[r],i+=n[0]*o[1]-n[1]*o[0];return.5*i}function g(t){var n=t[0],r=t[1],e=t[2];return Math.abs((n[0]-e[0])*(r[1]-n[1])-(n[0]-r[0])*(e[1]-n[1]))}function d(t,n){return t[1][2]-n[1][2]}function m(){function t(t,n){for(;n>0;){var r=(n+1>>1)-1,o=e[r];if(d(t,o)>=0)break;e[o._=n]=o,e[t._=n=r]=t}}function n(t,n){for(;;){var r=n+1<<1,i=r-1,u=n,s=e[u];if(o>i&&d(e[i],s)<0&&(s=e[u=i]),o>r&&d(e[r],s)<0&&(s=e[u=r]),u===n)break;e[s._=n]=s,e[t._=n=u]=t}}var r={},e=[],o=0;return r.push=function(n){return t(e[n._=o]=n,o++),o},r.pop=function(){if(!(0>=o)){var t,r=e[0];return--o>0&&(t=e[o],n(e[t._=0]=t,0)),r}},r.remove=function(r){var i,u=r._;if(e[u]===r)return u!==--o&&(i=e[o],(d(i,r)<0?t:n)(e[i._=u]=i,u)),u},r}function v(t){if(!t)return y;var n,r,e=t.scale[0],o=t.scale[1],i=t.translate[0],u=t.translate[1];return function(t,s){s||(n=r=0),t[0]=(n+=t[0])*e+i,t[1]=(r+=t[1])*o+u}}function h(t){if(!t)return y;var n,r,e=t.scale[0],o=t.scale[1],i=t.translate[0],u=t.translate[1];return function(t,s){s||(n=r=0);var a=(t[0]-i)/e|0,c=(t[1]-u)/o|0;t[0]=a-n,t[1]=c-r,n=a,r=c}}function y(){}var M={version:"1.6.18",mesh:function(t){return s(t,e.apply(this,arguments))},meshArcs:e,merge:function(t){return s(t,o.apply(this,arguments))},mergeArcs:o,feature:i,neighbors:p,presimplify:f};"function"==typeof define&&define.amd?define(M):"object"==typeof r&&r.exports?r.exports=M:this.topojson=M}()},{}]},{},[12]);