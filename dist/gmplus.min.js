/* GMPlus.js 0.1.0 MIT License. 2015 Yago Ferrer <yago.ferrer@gmail.com> */
!function(t){"use strict";function o(t){var r,e,a;r=Array.isArray(t)?[]:{};for(a in t)e=t[a],r[a]="object"==typeof e?o(e):e;return r}function r(r,e){e=e||function(){};var a=o(r);a.zoom=r.zoom||m.zoom,a.center=new t.google.maps.LatLng(r.lat,r.lng),a.id=void 0,a.lat=void 0,a.lng=void 0,c.id=r.id,c.options=r,c.instance=new t.google.maps.Map(document.getElementById(r.id),a),t.GMP.maps[r.id].instance=c.instance,t.google.maps.event.addListenerOnce(c.instance,"idle",function(){e(!1,c.instance)})}function e(t,o){return!t||t&&"object"!=typeof t?(o(new Error("You must pass a valid first parameter: options")),!1):t.id||t["class"]?t.lat&&t.lng?!0:(o(new Error('You must pass valid "lat" (latitude) and "lng" (longitude) values')),!1):(o(new Error('You must pass an "id" or a "class" property values')),!1)}function a(o,a){return c=this,e(o,a)&&(t.GMP.maps=t.GMP.maps||{},t.GMP.maps[o.id]={create:function(){r(this.arguments,a)},arguments:o},o.async!==!1?g.load(o):t.GMP.maps[o.id].create()),this}function n(t,o){if(1===o.count)s(t,o.setterKey,o.setters[o.setterKey]);else for(var r in o.setters)s(t,r,o.setters[o.setterKey])}function s(t,o,r){"setMove"==o?t.setAnimation(r):t[o](r)}function i(t,o){var r=o.event||"click",e=new google.maps.InfoWindow(o);google.maps.event.addListener(t,r,function(){e.open(c.instance,t)})}function p(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var o,r;return o=16*Math.random()|0,r="x"===t?o:3&o|8,r.toString(16)})}function u(o,r){o.map=c.instance,o.position=new google.maps.LatLng(o.lat,o.lng);var e=o.group||!1;if(r&&r.group&&(e=r.group||e),r)for(var a in r)o[a]=r[a];if(e&&t.GMP.maps[c.id].groupOptions&&t.GMP.maps[c.id].groupOptions[e])for(var a in t.GMP.maps[c.id].groupOptions[e])o[a]=t.GMP.maps[c.id].groupOptions[e][a];o.data=o.data||{},o.data&&(o.data.uid=p()),c.options.crossfilter&&c.options.crossfilter.add([o.data]);var n=new t.google.maps.Marker(o);return o.move&&n.setAnimation(o.move),o.bubble&&i(n,o.bubble),e&&(t.GMP.maps[c.id].groups=t.GMP.maps[c.id].groups||{},t.GMP.maps[c.id].groups[e]=t.GMP.maps[c.id].groups[e]||[],t.GMP.maps[c.id].groups[e].push(n)),t.GMP.maps[c.id].markers=t.GMP.maps[c.id].markers||{},t.GMP.maps[c.id].markers[o.data.uid]=n,n}function d(t){var o,r={},e=0;for(var a in t)o="set"+a[0].toUpperCase()+a.slice(1),r[o]=t[a],e++;var n={count:e,setterKey:o,setters:r};return n}var c,m={version:"3.exp",zoom:8},g={load:function(o){var r=o.version||m.version,e=document.createElement("script");return e.type="text/javascript",e.src="//maps.googleapis.com/maps/api/js?v="+r+"&callback=GMP.maps."+o.id+".create",t.document.body.appendChild(e)}};a.prototype.instance=!1,a.prototype.bounce=1,a.prototype.drop=2,a.prototype.addMarker=function(t,o){if("[object Array]"===Object.prototype.toString.call(t)){var r,e=[];for(var a in t)r=u(t[a],o),e.push(r);return e}return"object"==typeof t?u(t,o):void 0},a.prototype.updateMarker=function(o,r){var e=d(r);if("[object Array]"===Object.prototype.toString.call(o)){var a;for(var s in o)a=o[s].uid,t.GMP.maps[c.id].markers[a]&&n(t.GMP.maps[c.id].markers[a],e)}},a.prototype.addGroup=function(o,r){t.GMP.maps[c.id].groups=t.GMP.maps[c.id].groups||[],t.GMP.maps[c.id].groupOptions=t.GMP.maps[c.id].groupOptions||{},t.GMP.maps[c.id].groupOptions[o]=r},a.prototype.updateGroup=function(o,r){var e=d(r);if(t.GMP.maps[c.id].groups&&t.GMP.maps[c.id].groups[o])for(var a in t.GMP.maps[c.id].groups[o])n(t.GMP.maps[c.id].groups[o][a],e)},t.GMP=a}(this,window);