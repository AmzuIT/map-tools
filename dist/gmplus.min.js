/* gmplus.js 0.1.0 MIT License. 2015 Yago Ferrer <yago.ferrer@gmail.com> */
!function t(n,r,e){function o(a,u){if(!r[a]){if(!n[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[a]={exports:{}};n[a][0].call(f.exports,function(t){var r=n[a][1][t];return o(r?r:t)},f,f.exports,t,n,r,e)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<e.length;a++)o(e[a]);return o}({1:[function(t,n){n.exports={version:"3.exp",zoom:8}},{}],2:[function(t,n){(function(r){"use strict";function e(t){var n=t.version||o.version,e=r.window.document.createElement("script");return e.type="text/javascript",e.src="//maps.googleapis.com/maps/api/js?v="+n+"&callback=GMP.maps."+t.id+".create",r.window.document.body.appendChild(e)}var o=t("gmplus/defaults");n.exports={load:e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"gmplus/defaults":1}],3:[function(t,n){"use strict";var r=t("gmplus/utils"),e=t("gmplus/defaults"),o=t("gmplus/gmaps.js"),i=t("topojson");n.exports=function(t){function n(n,o){o=o||function(){};var i=r.clone(n);i.zoom=n.zoom||e.zoom,i.center=new t.google.maps.LatLng(n.lat,n.lng),i.id=void 0,i.lat=void 0,i.lng=void 0,m.id=n.id,m.options=n,m.instance=new t.google.maps.Map(t.document.getElementById(n.id),i),t.GMP.maps[n.id].instance=m.instance,t.google.maps.event.addListenerOnce(m.instance,"idle",function(){o(!1,m.instance)})}function a(t,n){return!t||t&&"object"!=typeof t?(n(new Error("You must pass a valid first parameter: options")),!1):t.id||t["class"]?t.lat&&t.lng?!0:(n(new Error('You must pass valid "lat" (latitude) and "lng" (longitude) values')),!1):(n(new Error('You must pass an "id" or a "class" property values')),!1)}function u(r,e){return m=this,a(r,e)&&(t.GMP.maps=u.maps||{},t.GMP.maps[r.id]={create:function(){n(this.arguments,e)},arguments:r},r.async!==!1?o.load(r):t.GMP.maps[r.id].create()),this}function s(t,n){var r={};for(var e in t)n.indexOf(e)>-1?(r.custom=r.custom||{},r.custom[e]=t[e]):(r.setters=r.setters||{},r.setters["set"+e[0].toUpperCase()+e.slice(1)]=t[e]);return r}function c(t,n){return t.data&&t.data.uid?f(t,n):t.uid&&u.maps[m.id].markers[t.uid]?f(u.maps[m.id].markers[t.uid],n):void 0}function f(n,r){if(r.custom&&(r.custom.move&&n.setAnimation(r.custom.move),r.custom.lat&&r.custom.lng&&n.setPosition(new t.google.maps.LatLng(r.custom.lat,r.custom.lng)),r.custom.bubble&&r.custom.bubble.content&&n.bubble.instance.setContent(r.custom.bubble.content)),r.setters)for(var e in r.setters)n[e](r.setters[e]);return n}function p(n,r){var e=r.event||"click";r.content=r.content.replace(/\{(\w+)\}/g,function(t,r){return n.data[r]?n.data[r]:""}),n.bubble.instance=new t.google.maps.InfoWindow(r),t.google.maps.event.addListener(n,e,function(){n.bubble.instance.open(m.instance,n)})}function l(n,e){n.map=m.instance,n.position=new t.google.maps.LatLng(n.lat,n.lng);var o=n.group||!1;if(e&&e.group&&(o=e.group||o),e)for(var i in e)n[i]=e[i];if(o&&u.maps[m.id].groupOptions&&u.maps[m.id].groupOptions[o])for(var a in u.maps[m.id].groupOptions[o])n[a]=u.maps[m.id].groupOptions[o][a];n.data=n.data||{},n.data&&(n.data.uid=r.createUid()),m.options.crossfilter&&m.options.crossfilter.add([n.data]);var s=new t.google.maps.Marker(n);return n.move&&s.setAnimation(n.move),n.bubble&&p(s,n.bubble),o&&(u.maps[m.id].groups=u.maps[m.id].groups||{},u.maps[m.id].groups[o]=u.maps[m.id].groups[o]||[],u.maps[m.id].groups[o].push(s)),u.maps[m.id].markers=u.maps[m.id].markers||{},u.maps[m.id].markers[n.data.uid]=s,s}function d(t,n){var r;for(var e in t)r=t[e],n.style&&m.instance.data.overrideStyle(r,n.style)}var m;u.prototype.instance=!1,u.prototype.bounce=1,u.prototype.drop=2,u.prototype.addMarker=function(t,n){if("[object Array]"===Object.prototype.toString.call(t)){var r,e=[];for(var o in t)r=l(t[o],n),e.push(r);return e}return"object"==typeof t?l(t,n):void 0};var g=["lat","lng","move","bubble"];return u.prototype.updateMarker=function(t,n){var r=Object.prototype.toString.call(t),e=s(n,g);if("[object Object]"===r)return c(t,e);if("[object Array]"===r){var o,i,a=[];for(var u in t)o=t[u],i=c(o,e),a.push(i);return a}},u.prototype.addGroup=function(t,n){u.maps[m.id].groups=u.maps[m.id].groups||[],u.maps[m.id].groupOptions=u.maps[m.id].groupOptions||{},u.maps[m.id].groupOptions[t]=n},u.prototype.updateGroup=function(t,n){var r,e=[],o=s(n,g);if(u.maps[m.id].groups&&u.maps[m.id].groups[t])for(var i in u.maps[m.id].groups[t])r=c(u.maps[m.id].groups[t][i],o),e.push(r);return e},u.prototype.loadTopoJson=function(t,n){var r,e,o;for(var a in n)r=n[a],e=i.feature(t,t.objects[r.object]),o=m.instance.data.addGeoJson(e),d(o,r);return o},u}},{"gmplus/defaults":1,"gmplus/gmaps.js":2,"gmplus/utils":4,topojson:6}],4:[function(t,n){function r(t){var n,e,o;n=Array.isArray(t)?[]:{};for(o in t)e=t[o],n[o]="object"==typeof e?r(e):e;return n}function e(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var n,r;return n=16*Math.random()|0,r="x"===t?n:3&n|8,r.toString(16)})}n.exports={clone:r,createUid:e}},{}],5:[function(t){window.GMP=t("gmplus/map")(window)},{"gmplus/map":3}],6:[function(t,r){!function(){function t(t,n){function r(n){var r,e=t.arcs[0>n?~n:n],o=e[0];return t.transform?(r=[0,0],e.forEach(function(t){r[0]+=t[0],r[1]+=t[1]})):r=e[e.length-1],0>n?[r,o]:[o,r]}function e(t,n){for(var r in t){var e=t[r];delete n[e.start],delete e.start,delete e.end,e.forEach(function(t){o[0>t?~t:t]=1}),u.push(e)}}var o={},i={},a={},u=[],s=-1;return n.forEach(function(r,e){var o,i=t.arcs[0>r?~r:r];i.length<3&&!i[1][0]&&!i[1][1]&&(o=n[++s],n[s]=r,n[e]=o)}),n.forEach(function(t){var n,e,o=r(t),u=o[0],s=o[1];if(n=a[u])if(delete a[n.end],n.push(t),n.end=s,e=i[s]){delete i[e.start];var c=e===n?n:n.concat(e);i[c.start=n.start]=a[c.end=e.end]=c}else i[n.start]=a[n.end]=n;else if(n=i[s])if(delete i[n.start],n.unshift(t),n.start=u,e=a[u]){delete a[e.end];var f=e===n?n:e.concat(n);i[f.start=e.start]=a[f.end=n.end]=f}else i[n.start]=a[n.end]=n;else n=[t],i[n.start=u]=a[n.end=s]=n}),e(a,i),e(i,a),n.forEach(function(t){o[0>t?~t:t]||u.push([t])}),u}function e(n,r,e){function o(t){var n=0>t?~t:t;(f[n]||(f[n]=[])).push({i:t,g:c})}function i(t){t.forEach(o)}function a(t){t.forEach(i)}function u(t){"GeometryCollection"===t.type?t.geometries.forEach(u):t.type in p&&(c=t,p[t.type](t.arcs))}var s=[];if(arguments.length>1){var c,f=[],p={LineString:i,MultiLineString:a,Polygon:a,MultiPolygon:function(t){t.forEach(a)}};u(r),f.forEach(arguments.length<3?function(t){s.push(t[0].i)}:function(t){e(t[0].g,t[t.length-1].g)&&s.push(t[0].i)})}else for(var l=0,d=n.arcs.length;d>l;++l)s.push(l);return{type:"MultiLineString",arcs:t(n,s)}}function o(r,e){function o(t){t.forEach(function(n){n.forEach(function(n){(a[n=0>n?~n:n]||(a[n]=[])).push(t)})}),s.push(t)}function i(t){return l(u(r,{type:"Polygon",arcs:[t]}).coordinates[0])>0}var a={},s=[],c=[];return e.forEach(function(t){"Polygon"===t.type?o(t.arcs):"MultiPolygon"===t.type&&t.arcs.forEach(o)}),s.forEach(function(t){if(!t._){var n=[],r=[t];for(t._=1,c.push(n);t=r.pop();)n.push(t),t.forEach(function(t){t.forEach(function(t){a[0>t?~t:t].forEach(function(t){t._||(t._=1,r.push(t))})})})}}),s.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:c.map(function(e){var o=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){a[0>t?~t:t].length<2&&o.push(t)})})}),o=t(r,o),(n=o.length)>1)for(var u,s=i(e[0][0]),c=0;c<n;++c)if(s===i(o[c])){u=o[0],o[0]=o[c],o[c]=u;break}return o})}}function i(t,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return a(t,n)})}:a(t,n)}function a(t,n){var r={type:"Feature",id:n.id,properties:n.properties||{},geometry:u(t,n)};return null==n.id&&delete r.id,r}function u(t,n){function r(t,n){n.length&&n.pop();for(var r,e=f[0>t?~t:t],o=0,i=e.length;i>o;++o)n.push(r=e[o].slice()),c(r,o);0>t&&s(n,i)}function e(t){return t=t.slice(),c(t,0),t}function o(t){for(var n=[],e=0,o=t.length;o>e;++e)r(t[e],n);return n.length<2&&n.push(n[0].slice()),n}function i(t){for(var n=o(t);n.length<4;)n.push(n[0].slice());return n}function a(t){return t.map(i)}function u(t){var n=t.type;return"GeometryCollection"===n?{type:n,geometries:t.geometries.map(u)}:n in p?{type:n,coordinates:p[n](t)}:null}var c=v(t.transform),f=t.arcs,p={Point:function(t){return e(t.coordinates)},MultiPoint:function(t){return t.coordinates.map(e)},LineString:function(t){return o(t.arcs)},MultiLineString:function(t){return t.arcs.map(o)},Polygon:function(t){return a(t.arcs)},MultiPolygon:function(t){return t.arcs.map(a)}};return u(n)}function s(t,n){for(var r,e=t.length,o=e-n;o<--e;)r=t[o],t[o++]=t[e],t[e]=r}function c(t,n){for(var r=0,e=t.length;e>r;){var o=r+e>>>1;t[o]<n?r=o+1:e=o}return r}function f(t){function n(t,n){t.forEach(function(t){0>t&&(t=~t);var r=o[t];r?r.push(n):o[t]=[n]})}function r(t,r){t.forEach(function(t){n(t,r)})}function e(t,n){"GeometryCollection"===t.type?t.geometries.forEach(function(t){e(t,n)}):t.type in a&&a[t.type](t.arcs,n)}var o={},i=t.map(function(){return[]}),a={LineString:n,MultiLineString:r,Polygon:r,MultiPolygon:function(t,n){t.forEach(function(t){r(t,n)})}};t.forEach(e);for(var u in o)for(var s=o[u],f=s.length,p=0;f>p;++p)for(var l=p+1;f>l;++l){var d,m=s[p],g=s[l];(d=i[m])[u=c(d,g)]!==g&&d.splice(u,0,g),(d=i[g])[u=c(d,m)]!==m&&d.splice(u,0,m)}return i}function p(t,n){function r(t){i.remove(t),t[1][2]=n(t),i.push(t)}var e=v(t.transform),o=h(t.transform),i=g();return n||(n=d),t.arcs.forEach(function(t){for(var a,u,s=[],c=0,f=0,p=t.length;p>f;++f)u=t[f],e(t[f]=[u[0],u[1],1/0],f);for(var f=1,p=t.length-1;p>f;++f)a=t.slice(f-1,f+2),a[1][2]=n(a),s.push(a),i.push(a);for(var f=0,p=s.length;p>f;++f)a=s[f],a.previous=s[f-1],a.next=s[f+1];for(;a=i.pop();){var l=a.previous,d=a.next;a[1][2]<c?a[1][2]=c:c=a[1][2],l&&(l.next=d,l[2]=a[2],r(l)),d&&(d.previous=l,d[0]=a[0],r(d))}t.forEach(o)}),t}function l(t){for(var n,r=-1,e=t.length,o=t[e-1],i=0;++r<e;)n=o,o=t[r],i+=n[0]*o[1]-n[1]*o[0];return.5*i}function d(t){var n=t[0],r=t[1],e=t[2];return Math.abs((n[0]-e[0])*(r[1]-n[1])-(n[0]-r[0])*(e[1]-n[1]))}function m(t,n){return t[1][2]-n[1][2]}function g(){function t(t,n){for(;n>0;){var r=(n+1>>1)-1,o=e[r];if(m(t,o)>=0)break;e[o._=n]=o,e[t._=n=r]=t}}function n(t,n){for(;;){var r=n+1<<1,i=r-1,a=n,u=e[a];if(o>i&&m(e[i],u)<0&&(u=e[a=i]),o>r&&m(e[r],u)<0&&(u=e[a=r]),a===n)break;e[u._=n]=u,e[t._=n=a]=t}}var r={},e=[],o=0;return r.push=function(n){return t(e[n._=o]=n,o++),o},r.pop=function(){if(!(0>=o)){var t,r=e[0];return--o>0&&(t=e[o],n(e[t._=0]=t,0)),r}},r.remove=function(r){var i,a=r._;if(e[a]===r)return a!==--o&&(i=e[o],(m(i,r)<0?t:n)(e[i._=a]=i,a)),a},r}function v(t){if(!t)return y;var n,r,e=t.scale[0],o=t.scale[1],i=t.translate[0],a=t.translate[1];return function(t,u){u||(n=r=0),t[0]=(n+=t[0])*e+i,t[1]=(r+=t[1])*o+a}}function h(t){if(!t)return y;var n,r,e=t.scale[0],o=t.scale[1],i=t.translate[0],a=t.translate[1];return function(t,u){u||(n=r=0);var s=(t[0]-i)/e|0,c=(t[1]-a)/o|0;t[0]=s-n,t[1]=c-r,n=s,r=c}}function y(){}var b={version:"1.6.18",mesh:function(t){return u(t,e.apply(this,arguments))},meshArcs:e,merge:function(t){return u(t,o.apply(this,arguments))},mergeArcs:o,feature:i,neighbors:f,presimplify:p};"function"==typeof define&&define.amd?define(b):"object"==typeof r&&r.exports?r.exports=b:this.topojson=b}()},{}]},{},[5]);