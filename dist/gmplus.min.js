/* gmplus.js 0.3.0 MIT License. 2015 Yago Ferrer <yago.ferrer@gmail.com> */
!function r(n,t,e){function o(i,a){if(!t[i]){if(!n[i]){var s="function"==typeof require&&require;if(!a&&s)return s(i,!0);if(u)return u(i,!0);var f=new Error("Cannot find module '"+i+"'");throw f.code="MODULE_NOT_FOUND",f}var c=t[i]={exports:{}};n[i][0].call(c.exports,function(r){var t=n[i][1][r];return o(t?t:r)},c,c.exports,r,n,t,e)}return t[i].exports}for(var u="function"==typeof require&&require,i=0;i<e.length;i++)o(e[i]);return o}({1:[function(r,n){"use strict";var t=(r("gmplus/utils"),r("crossfilter"));n.exports=function(n,e){function o(r){return r.el?n.document.querySelector(r.el):r.id?n.document.getElementById(r.id):void 0}function u(r,t){t=t||function(){};var u=s.mapOptions(r);r.id=r.id||r.el.substring(1),e.id=r.id,e.options=r,e.instance=new n.google.maps.Map(o(r),u),n.GMP.maps[e.id].instance=e.instance,n.google.maps.event.addListenerOnce(e.instance,"idle",function(){t(!1,e.instance)})}function i(r,n){return!r||r&&"object"!=typeof r?(n(new Error("You must pass a valid first parameter: options")),!1):r.id||r.el?r.lat&&r.lng?!0:(n(new Error('You must pass valid "lat" (latitude) and "lng" (longitude) values')),!1):(n(new Error('You must pass an "id" or a "el" property values')),!1)}function a(r,o){if(i(r,o)){var a=r.id||r.el.substring(1);if(n.GMP.maps=n.GMP.maps||{},n.GMP.maps[a]={create:function(){u(this.arguments,o)},arguments:r},n.GMP.maps[a].markers=n.GMP.maps[a].markers||{},e.markers=n.GMP.maps[a].markers,r.filters){n.GMP.maps[a].markers.crossfilter=n.GMP.maps[a].markers.crossfilter||t([]),n.GMP.maps[a].markers.filter=n.GMP.maps[a].markers.filters||{};var f,c;for(c in r.filters)f=n.GMP.maps[a].markers.crossfilter.dimension(r.filters[c]),n.GMP.maps[a].markers.filter[c]=f}r.async!==!1||r.sync===!0?s.load(a,r):n.GMP.maps[a].create()}}var s=r("gmplus/gmaps.js")(n);return{load:a}}},{crossfilter:15,"gmplus/gmaps.js":6,"gmplus/utils":12}],2:[function(r,n){"use strict";var t=r("gmplus/utils");n.exports=function(n,e){function o(r,o){var u;r.map=e.instance,r.position=new n.google.maps.LatLng(r.lat,r.lng);var a=r.group||!1;if(o&&o.group&&(a=o.group||a),o)for(u in o)o.hasOwnProperty(u)&&(r[u]=o[u]);if(a&&e.markers&&e.markers.groupOptions&&e.markers.groupOptions[a])for(var s in e.markers.groupOptions[a])r[s]=e.markers.groupOptions[a][s];r.data=r.data||{},r.data&&(r.data.uid=t.createUid()),e.options.filters&&e.markers.crossfilter.add([r.data]);var f=new n.google.maps.Marker(r);return r.move&&f.setAnimation(r.move),r.bubble&&i.create(f,r.bubble,e.instance),a&&(e.markers.groups=n.GMP.maps[e.id].markers.groups||{},e.markers.groups[a]=n.GMP.maps[e.id].markers.groups[a]||[],e.markers.groups[a].push(f)),e.markers.all=n.GMP.maps[e.id].markers.all||{},e.markers.all[r.data.uid]=f,f}function u(r,n){if(r.length&&r.length>=1){var t,e=[];for(var u in r)t=o(r[u],n),e.push(t);return e}return o(r,n)}var i=r("gmplus/bubble")(n);return u}},{"gmplus/bubble":3,"gmplus/utils":12}],3:[function(r,n){"use strict";n.exports=function(r){function n(n,t,e){var o=t.event||"click";t.content=t.content.replace(/\{(\w+)\}/g,function(r,t){return n.data[t]||""}),n.bubble.instance=new r.google.maps.InfoWindow(t),r.google.maps.event.addListener(n,o,function(){n.bubble.instance.open(e,n)})}return{create:n}}},{}],4:[function(r,n){"use strict";n.exports={version:"3.18",zoom:8,customMapOptions:["id","lat","lng","type"],customMarkerOptions:["lat","lng","move","bubble"]}},{}],5:[function(r,n){"use strict";n.exports=function(r,n){function t(n,t){return t.custom&&(t.custom.move&&n.setAnimation(t.custom.move),t.custom.lat&&t.custom.lng&&n.setPosition(new r.google.maps.LatLng(t.custom.lat,t.custom.lng)),t.custom.bubble&&t.custom.bubble.content&&n.bubble.instance.setContent(t.custom.bubble.content)),t.defaults&&n.setOptions(t.defaults),n}function e(e,o){return e.data&&e.data.uid?t(e,o):e.uid&&r.GMP.maps[n.id].markers.all[e.uid]?t(r.GMP.maps[n.id].markers.all[e.uid],o):void 0}return e}},{}],6:[function(r,n){"use strict";var t=r("gmplus/config"),e=r("gmplus/utils");n.exports=function(r){function n(n,e){var o=e.version||t.version,u=r.document.createElement("script");return u.type="text/javascript",u.src="//maps.googleapis.com/maps/api/js?v="+o+"&callback=GMP.maps."+n+".create",r.document.body.appendChild(u)}function o(n){var o=e.clone(n,t.customMapOptions);return o.zoom=n.zoom||t.zoom,n.lat&&n.lng&&(o.center=new r.google.maps.LatLng(n.lat,n.lng)),n.type&&(o.mapTypeId=r.google.maps.MapTypeId[n.type]||!1),o}return{load:n,mapOptions:o}}},{"gmplus/config":4,"gmplus/utils":12}],7:[function(r,n){"use strict";var t=r("gmplus/utils"),e=r("gmplus/config");n.exports=function(n,o){function u(r,t){n.GMP.maps[o.id].markers=n.GMP.maps[o.id].markers||{},n.GMP.maps[o.id].markers.groups=n.GMP.maps[o.id].markers.groups||[],n.GMP.maps[o.id].markers.groupOptions=n.GMP.maps[o.id].markers.groupOptions||{},n.GMP.maps[o.id].markers.groupOptions[r]=t}function i(r,u){var i,s,f=[],c=t.prepareOptions(u,e.customMarkerOptions);if(n.GMP.maps[o.id].markers.groups&&n.GMP.maps[o.id].markers.groups[r])for(s in n.GMP.maps[o.id].markers.groups[r])n.GMP.maps[o.id].markers.groups[r].hasOwnProperty(s)&&(i=a(n.GMP.maps[o.id].markers.groups[r][s],c),f.push(i));return f}var a=r("gmplus/findUpdateMarker")(n,o);return{addGroup:u,updateGroup:i}}},{"gmplus/config":4,"gmplus/findUpdateMarker":5,"gmplus/utils":12}],8:[function(r,n){"use strict";n.exports=function(n){function t(t,e){var o=this;this.addMarker=r("gmplus/addMarker")(n,o),this.addTopoJson=r("gmplus/topojson")(n,o).addTopoJson,this.addGeoJson=r("gmplus/topojson")(n,o).addGeoJson,this.updateMarker=r("gmplus/updateMarker")(n,o),this.addGroup=r("gmplus/groups")(n,o).addGroup,this.updateGroup=r("gmplus/groups")(n,o).updateGroup,this.updateMap=r("gmplus/updateMap")(n,o);var u=r("gmplus/addMap")(n,o);return n.onload=u.load(t,e),this}return t.prototype.instance=!1,t.prototype.bounce=1,t.prototype.drop=2,t}},{"gmplus/addMap":1,"gmplus/addMarker":2,"gmplus/groups":7,"gmplus/topojson":9,"gmplus/updateMap":10,"gmplus/updateMarker":11}],9:[function(r,n){"use strict";var t=r("topojson"),e=r("gmplus/utils"),o=r("crossfilter");n.exports=function(r,n){function u(t,o){var u,i;for(i in t)t.hasOwnProperty(i)&&(u=t[i],u.data={},u.forEachProperty(function(r,n){u.data[n]=r}),u.data.uid=e.createUid(),o&&o.style&&n.instance.data.overrideStyle(u,o.style),r.GMP.maps[n.id].json.all[u.data.uid]=u,r.GMP.maps[n.id].json.crossfilter.add(u.data))}function i(){r.GMP.maps[n.id].json=r.GMP.maps[n.id].json||{},r.GMP.maps[n.id].json.all=r.GMP.maps[n.id].json.all||{},r.GMP.maps[n.id].json.groups=r.GMP.maps[n.id].json.groups||{},r.GMP.maps[n.id].json.crossfilter=r.GMP.maps[n.id].json.crossfilter||o([])}function a(e,o){i();var a,s,f,c;for(c in o)o.hasOwnProperty(c)&&(a=o[c],s=t.feature(e,e.objects[a.object]),f=n.instance.data.addGeoJson(s),u(f,a),r.GMP.maps[n.id].json.groups[a.object]=f);return f}function s(r,t){i();var e=n.instance.data.addGeoJson(r,t);return u(e,t),e}return{addGeoJson:s,addTopoJson:a}}},{crossfilter:15,"gmplus/utils":12,topojson:16}],10:[function(r,n){"use strict";n.exports=function(n,t){function e(r){var n=o.mapOptions(r);return t.instance.setOptions(n)}var o=r("gmplus/gmaps.js")(n);return e}},{"gmplus/gmaps.js":6}],11:[function(r,n){"use strict";var t=r("gmplus/utils"),e=r("gmplus/config");n.exports=function(n,o){function u(r,n){var o=Object.prototype.toString.call(r),u=t.prepareOptions(n,e.customMarkerOptions);if("[object Object]"===o)return i(r,u);if("[object Array]"===o){var a,s,f,c=[];for(f in r)r.hasOwnProperty(f)&&(a=r[f],s=i(a,u),c.push(s));return c}}var i=r("gmplus/findUpdateMarker")(n,o);return u}},{"gmplus/config":4,"gmplus/findUpdateMarker":5,"gmplus/utils":12}],12:[function(r,n){"use strict";function t(r,n){var e,o,u;e=Array.isArray(r)?[]:{};for(u in r)r.hasOwnProperty(u)&&(!n||n&&-1===n.indexOf(u))&&(o=r[u],e[u]="object"==typeof o?t(o):o);return e}function e(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(r){var n,t;return n=16*Math.random()|0,t="x"===r?n:3&n|8,t.toString(16)})}function o(r,n){var t,e={};for(t in r)r.hasOwnProperty(t)&&(n.indexOf(t)>-1?(e.custom=e.custom||{},e.custom[t]=r[t]):(e.defaults=e.defaults||{},e.defaults[t]=r[t]));return e}n.exports={clone:t,createUid:e,prepareOptions:o}},{}],13:[function(r){"use strict";window.GMP=r("gmplus/index")(window)},{"gmplus/index":8}],14:[function(r,n,t){!function(r){function n(r){return r}function t(r,n){for(var t=0,e=n.length,o=new Array(e);e>t;++t)o[t]=r[n[t]];return o}function e(r){function n(n,t,e,o){for(;o>e;){var u=e+o>>>1;r(n[u])<t?e=u+1:o=u}return e}function t(n,t,e,o){for(;o>e;){var u=e+o>>>1;t<r(n[u])?o=u:e=u+1}return e}return t.right=t,t.left=n,t}function o(r){function n(r,n,t){for(var o=t-n,u=(o>>>1)+1;--u>0;)e(r,u,o,n);return r}function t(r,n,t){for(var o,u=t-n;--u>0;)o=r[n],r[n]=r[n+u],r[n+u]=o,e(r,1,u,n);return r}function e(n,t,e,o){for(var u,i=n[--o+t],a=r(i);(u=t<<1)<=e&&(e>u&&r(n[o+u])>r(n[o+u+1])&&u++,!(a<=r(n[o+u])));)n[o+t]=n[o+u],t=u;n[o+t]=i}return n.sort=t,n}function u(r){function n(n,e,o,u){var i,a,s,f,c=new Array(u=Math.min(o-e,u));for(a=0;u>a;++a)c[a]=n[e++];if(t(c,0,u),o>e){i=r(c[0]);do(s=r(f=n[e])>i)&&(c[0]=f,i=r(t(c,0,u)[0]));while(++e<o)}return c}var t=o(r);return n}function i(r){function n(n,t,e){for(var o=t+1;e>o;++o){for(var u=o,i=n[o],a=r(i);u>t&&r(n[u-1])>a;--u)n[u]=n[u-1];n[u]=i}return n}return n}function a(r){function n(r,n,o){return(A>o-n?e:t)(r,n,o)}function t(t,e,o){var u,i=(o-e)/6|0,a=e+i,s=o-1-i,f=e+o-1>>1,c=f-i,p=f+i,l=t[a],d=r(l),m=t[c],v=r(m),g=t[f],h=r(g),y=t[p],M=r(y),x=t[s],k=r(x);d>v&&(u=l,l=m,m=u,u=d,d=v,v=u),M>k&&(u=y,y=x,x=u,u=M,M=k,k=u),d>h&&(u=l,l=g,g=u,u=d,d=h,h=u),v>h&&(u=m,m=g,g=u,u=v,v=h,h=u),d>M&&(u=l,l=y,y=u,u=d,d=M,M=u),h>M&&(u=g,g=y,y=u,u=h,h=M,M=u),v>k&&(u=m,m=x,x=u,u=v,v=k,k=u),v>h&&(u=m,m=g,g=u,u=v,v=h,h=u),M>k&&(u=y,y=x,x=u,u=M,M=k,k=u);var b=m,P=v,G=y,E=M;t[a]=l,t[c]=t[e],t[f]=g,t[p]=t[o-1],t[s]=x;var O=e+1,w=o-2,j=E>=P&&P>=E;if(j)for(var A=O;w>=A;++A){var L=t[A],_=r(L);if(P>_)A!==O&&(t[A]=t[O],t[O]=L),++O;else if(_>P)for(;;){var S=r(t[w]);{if(!(S>P)){if(P>S){t[A]=t[O],t[O++]=t[w],t[w--]=L;break}t[A]=t[w],t[w--]=L;break}w--}}}else for(var A=O;w>=A;A++){var L=t[A],_=r(L);if(P>_)A!==O&&(t[A]=t[O],t[O]=L),++O;else if(_>E)for(;;){var S=r(t[w]);{if(!(S>E)){P>S?(t[A]=t[O],t[O++]=t[w],t[w--]=L):(t[A]=t[w],t[w--]=L);break}if(w--,A>w)break}}}if(t[e]=t[O-1],t[O-1]=b,t[o-1]=t[w+1],t[w+1]=G,n(t,e,O-1),n(t,w+2,o),j)return t;if(a>O&&w>s){for(var U,S;(U=r(t[O]))<=P&&U>=P;)++O;for(;(S=r(t[w]))<=E&&S>=E;)--w;for(var A=O;w>=A;A++){var L=t[A],_=r(L);if(P>=_&&_>=P)A!==O&&(t[A]=t[O],t[O]=L),O++;else if(E>=_&&_>=E)for(;;){var S=r(t[w]);{if(!(E>=S&&S>=E)){P>S?(t[A]=t[O],t[O++]=t[w],t[w--]=L):(t[A]=t[w],t[w--]=L);break}if(w--,A>w)break}}}}return n(t,O,w+1)}var e=i(r);return n}function s(r){for(var n=new Array(r),t=-1;++t<r;)n[t]=0;return n}function f(r,n){for(var t=r.length;n>t;)r[t++]=0;return r}function c(r,n){if(n>32)throw new Error("invalid array width!");return r}function p(r,n){return function(t){var e=t.length;return[r.left(t,n,0,e),r.right(t,n,0,e)]}}function l(r,n){var t=n[0],e=n[1];return function(n){var o=n.length;return[r.left(n,t,0,o),r.left(n,e,0,o)]}}function d(r){return[0,r.length]}function m(){return null}function v(){return 0}function g(r){return r+1}function h(r){return r-1}function y(r){return function(n,t){return n+ +r(t)}}function M(r){return function(n,t){return n-r(t)}}function x(){function r(r){var n=E,t=r.length;return t&&(x=x.concat(r),j=U(j,E+=t),_.forEach(function(e){e(r,n,t)})),c}function e(){for(var r=k(E,E),n=[],t=0,e=0;E>t;++t)j[t]?r[t]=e++:n.push(t);A.forEach(function(r){r(0,[],n)}),S.forEach(function(n){n(r)});for(var o,t=0,e=0;E>t;++t)(o=j[t])&&(t!==e&&(j[e]=o,x[e]=x[t]),++e);for(x.length=e;E>e;)j[--E]=0}function i(r){function e(n,e,o){W=n.map(r),H=Z(b(o),0,o),W=t(W,H);var u,i=$(W),a=i[0],s=i[1];if(K)for(u=0;o>u;++u)K(W[u],u)||(j[H[u]+e]|=V);else{for(u=0;a>u;++u)j[H[u]+e]|=V;for(u=s;o>u;++u)j[H[u]+e]|=V}if(!e)return B=W,R=H,tn=a,void(en=s);var f=B,c=R,p=0,l=0;for(B=new Array(E),R=k(E,E),u=0;e>p&&o>l;++u)f[p]<W[l]?(B[u]=f[p],R[u]=c[p++]):(B[u]=W[l],R[u]=H[l++]+e);for(;e>p;++p,++u)B[u]=f[p],R[u]=c[p];for(;o>l;++l,++u)B[u]=W[l],R[u]=H[l]+e;i=$(B),tn=i[0],en=i[1]}function i(r,n,t){rn.forEach(function(r){r(W,H,n,t)}),W=H=null}function s(r){for(var n,t=0,e=0;E>t;++t)j[n=R[t]]&&(t!==e&&(B[e]=B[t]),R[e]=r[n],++e);for(B.length=e;E>e;)R[e++]=0;var o=$(B);tn=o[0],en=o[1]}function f(r){var n=r[0],t=r[1];if(K)return K=null,T(function(r,e){return e>=n&&t>e}),tn=n,en=t,Q;var e,o,u,i=[],a=[];if(tn>n)for(e=n,o=Math.min(tn,t);o>e;++e)j[u=R[e]]^=V,i.push(u);else if(n>tn)for(e=tn,o=Math.min(n,en);o>e;++e)j[u=R[e]]^=V,a.push(u);if(t>en)for(e=Math.max(n,en),o=t;o>e;++e)j[u=R[e]]^=V,i.push(u);else if(en>t)for(e=Math.max(tn,t),o=en;o>e;++e)j[u=R[e]]^=V,a.push(u);return tn=n,en=t,A.forEach(function(r){r(V,i,a)}),Q}function c(r){return null==r?z():Array.isArray(r)?J(r):"function"==typeof r?q(r):L(r)}function L(r){return f(($=p(G,r))(B))}function J(r){return f(($=l(G,r))(B))}function z(){return f(($=d)(B))}function q(r){return $=d,T(K=r),tn=0,en=E,Q}function T(r){var n,t,e,o=[],u=[];for(n=0;E>n;++n)!(j[t=R[n]]&V)^!!(e=r(B[n],n))&&(e?(j[t]&=X,o.push(t)):(j[t]|=V,u.push(t)));A.forEach(function(r){r(V,o,u)})}function N(r){for(var n,t=[],e=en;--e>=tn&&r>0;)j[n=R[e]]||(t.push(x[n]),--r);return t}function F(r){for(var n,t=[],e=tn;en>e&&r>0;)j[n=R[e]]||(t.push(x[n]),--r),e++;return t}function I(r){function t(n,t,e,o){function u(){++W===D&&(y=C(y,Y<<=1),z=C(z,Y),D=P(Y))}var c,p,l,d,v,g,h=J,y=k(W,D),M=N,b=I,G=W,O=0,w=0;for(Q&&(M=b=m),J=new Array(W),W=0,z=G>1?U(z,E):k(E,D),G&&(l=(p=h[0]).key);o>w&&!((d=r(n[w]))>=d);)++w;for(;o>w;){for(p&&d>=l?(v=p,g=l,y[O]=W,(p=h[++O])&&(l=p.key)):(v={key:d,value:b()},g=d),J[W]=v;!(d>g||(z[c=t[w]+e]=W,j[c]&X||(v.value=M(v.value,x[c])),++w>=o));)d=r(n[w]);u()}for(;G>O;)J[y[O]=W]=h[O++],u();if(W>O)for(O=0;e>O;++O)z[O]=y[z[O]];c=A.indexOf(H),W>1?(H=i,K=s):(!W&&Z&&(W=1,J=[{key:null,value:b()}]),1===W?(H=a,K=f):(H=m,K=m),z=null),A[c]=H}function e(){if(W>1){for(var r=W,n=J,t=k(r,r),e=0,o=0;E>e;++e)j[e]&&(t[z[o]=z[e]]=1,++o);for(J=[],W=0,e=0;r>e;++e)t[e]&&(t[e]=W++,J.push(n[e]));if(W>1)for(var e=0;o>e;++e)z[e]=t[z[e]];else z=null;A[A.indexOf(H)]=W>1?(K=s,H=i):1===W?(K=f,H=a):K=H=m}else if(1===W){if(Z)return;for(var e=0;E>e;++e)if(j[e])return;J=[],W=0,A[A.indexOf(H)]=H=K=m}}function i(r,n,t){if(r!==V&&!Q){var e,o,u,i;for(e=0,u=n.length;u>e;++e)j[o=n[e]]&X||(i=J[z[o]],i.value=N(i.value,x[o]));for(e=0,u=t.length;u>e;++e)(j[o=t[e]]&X)===r&&(i=J[z[o]],i.value=F(i.value,x[o]))}}function a(r,n,t){if(r!==V&&!Q){var e,o,u,i=J[0];for(e=0,u=n.length;u>e;++e)j[o=n[e]]&X||(i.value=N(i.value,x[o]));for(e=0,u=t.length;u>e;++e)(j[o=t[e]]&X)===r&&(i.value=F(i.value,x[o]))}}function s(){var r,n;for(r=0;W>r;++r)J[r].value=I();for(r=0;E>r;++r)j[r]&X||(n=J[z[r]],n.value=N(n.value,x[r]))}function f(){var r,n=J[0];for(n.value=I(),r=0;E>r;++r)j[r]&X||(n.value=N(n.value,x[r]))}function c(){return Q&&(K(),Q=!1),J}function p(r){var n=q(c(),0,J.length,r);return T.sort(n,0,n.length)}function l(r,n,t){return N=r,F=n,I=t,Q=!0,_}function d(){return l(g,h,v)}function b(r){return l(y(r),M(r),v)}function G(r){function n(n){return r(n.value)}return q=u(n),T=o(n),_}function O(){return G(n)}function w(){return W}function L(){var r=A.indexOf(H);return r>=0&&A.splice(r,1),r=rn.indexOf(t),r>=0&&rn.splice(r,1),r=S.indexOf(e),r>=0&&S.splice(r,1),_}var _={top:p,all:c,reduce:l,reduceCount:d,reduceSum:b,order:G,orderNatural:O,size:w,dispose:L,remove:L};nn.push(_);var J,z,q,T,N,F,I,Y=8,D=P(Y),W=0,H=m,K=m,Q=!0,Z=r===m;return arguments.length<1&&(r=n),A.push(H),rn.push(t),S.push(e),t(B,R,0,E),d().orderNatural()}function Y(){var r=I(m),n=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return n()[0].value},r}function D(){nn.forEach(function(r){r.dispose()});var r=_.indexOf(e);return r>=0&&_.splice(r,1),r=_.indexOf(i),r>=0&&_.splice(r,1),r=S.indexOf(s),r>=0&&S.splice(r,1),O&=X,z()}var B,R,W,H,K,Q={filter:c,filterExact:L,filterRange:J,filterFunction:q,filterAll:z,top:N,bottom:F,group:I,groupAll:Y,dispose:D,remove:D},V=~O&-~O,X=~V,Z=a(function(r){return W[r]}),$=d,rn=[],nn=[],tn=0,en=0;return _.unshift(e),_.push(i),S.push(s),O|=V,(w>=32?!V:O&(1<<w)-1)&&(j=C(j,w<<=1)),e(x,0,E),i(x,0,E),Q}function s(){function r(r,n){var t;if(!d)for(t=n;E>t;++t)j[t]||(s=f(s,x[t]))}function n(r,n,t){var e,o,u;if(!d){for(e=0,u=n.length;u>e;++e)j[o=n[e]]||(s=f(s,x[o]));for(e=0,u=t.length;u>e;++e)j[o=t[e]]===r&&(s=c(s,x[o]))}}function t(){var r;for(s=p(),r=0;E>r;++r)j[r]||(s=f(s,x[r]))}function e(r,n,t){return f=r,c=n,p=t,d=!0,l}function o(){return e(g,h,v)}function u(r){return e(y(r),M(r),v)}function i(){return d&&(t(),d=!1),s}function a(){var t=A.indexOf(n);return t>=0&&A.splice(t),t=_.indexOf(r),t>=0&&_.splice(t),l}var s,f,c,p,l={reduce:e,reduceCount:o,reduceSum:u,value:i,dispose:a,remove:a},d=!0;return A.push(n),_.push(r),r(x,0,E),o()}function f(){return E}var c={add:r,remove:e,dimension:i,groupAll:s,size:f},x=[],E=0,O=0,w=8,j=L(0),A=[],_=[],S=[];return arguments.length?r(arguments[0]):c}function k(r,n){return(257>n?L:65537>n?_:S)(r)}function b(r){for(var n=k(r,r),t=-1;++t<r;)n[t]=t;return n}function P(r){return 8===r?256:16===r?65536:4294967296}x.version="1.3.11",x.permute=t;var G=x.bisect=e(n);G.by=e;var E=x.heap=o(n);E.by=o;var O=x.heapselect=u(n);O.by=u;var w=x.insertionsort=i(n);w.by=i;var j=x.quicksort=a(n);j.by=a;var A=32,L=s,_=s,S=s,U=f,C=c;"undefined"!=typeof Uint8Array&&(L=function(r){return new Uint8Array(r)},_=function(r){return new Uint16Array(r)},S=function(r){return new Uint32Array(r)},U=function(r,n){if(r.length>=n)return r;var t=new r.constructor(n);return t.set(r),t},C=function(r,n){var t;switch(n){case 16:t=_(r.length);break;case 32:t=S(r.length);break;default:throw new Error("invalid array width!")}return t.set(r),t}),r.crossfilter=x}("undefined"!=typeof t&&t||this)},{}],15:[function(r,n){n.exports=r("./crossfilter").crossfilter},{"./crossfilter":14}],16:[function(r,t){!function(){function r(r,n){function t(n){var t,e=r.arcs[0>n?~n:n],o=e[0];return r.transform?(t=[0,0],e.forEach(function(r){t[0]+=r[0],t[1]+=r[1]})):t=e[e.length-1],0>n?[t,o]:[o,t]}function e(r,n){for(var t in r){var e=r[t];delete n[e.start],delete e.start,delete e.end,e.forEach(function(r){o[0>r?~r:r]=1}),a.push(e)}}var o={},u={},i={},a=[],s=-1;return n.forEach(function(t,e){var o,u=r.arcs[0>t?~t:t];u.length<3&&!u[1][0]&&!u[1][1]&&(o=n[++s],n[s]=t,n[e]=o)}),n.forEach(function(r){var n,e,o=t(r),a=o[0],s=o[1];if(n=i[a])if(delete i[n.end],n.push(r),n.end=s,e=u[s]){delete u[e.start];var f=e===n?n:n.concat(e);u[f.start=n.start]=i[f.end=e.end]=f}else u[n.start]=i[n.end]=n;else if(n=u[s])if(delete u[n.start],n.unshift(r),n.start=a,e=i[a]){delete i[e.end];var c=e===n?n:e.concat(n);u[c.start=e.start]=i[c.end=n.end]=c}else u[n.start]=i[n.end]=n;else n=[r],u[n.start=a]=i[n.end=s]=n}),e(i,u),e(u,i),n.forEach(function(r){o[0>r?~r:r]||a.push([r])}),a}function e(n,t,e){function o(r){var n=0>r?~r:r;(c[n]||(c[n]=[])).push({i:r,g:f})}function u(r){r.forEach(o)}function i(r){r.forEach(u)}function a(r){"GeometryCollection"===r.type?r.geometries.forEach(a):r.type in p&&(f=r,p[r.type](r.arcs))}var s=[];if(arguments.length>1){var f,c=[],p={LineString:u,MultiLineString:i,Polygon:i,MultiPolygon:function(r){r.forEach(i)}};a(t),c.forEach(arguments.length<3?function(r){s.push(r[0].i)}:function(r){e(r[0].g,r[r.length-1].g)&&s.push(r[0].i)})}else for(var l=0,d=n.arcs.length;d>l;++l)s.push(l);return{type:"MultiLineString",arcs:r(n,s)}}function o(t,e){function o(r){r.forEach(function(n){n.forEach(function(n){(i[n=0>n?~n:n]||(i[n]=[])).push(r)})}),s.push(r)}function u(r){return l(a(t,{type:"Polygon",arcs:[r]}).coordinates[0])>0}var i={},s=[],f=[];return e.forEach(function(r){"Polygon"===r.type?o(r.arcs):"MultiPolygon"===r.type&&r.arcs.forEach(o)}),s.forEach(function(r){if(!r._){var n=[],t=[r];for(r._=1,f.push(n);r=t.pop();)n.push(r),r.forEach(function(r){r.forEach(function(r){i[0>r?~r:r].forEach(function(r){r._||(r._=1,t.push(r))})})})}}),s.forEach(function(r){delete r._}),{type:"MultiPolygon",arcs:f.map(function(e){var o=[];if(e.forEach(function(r){r.forEach(function(r){r.forEach(function(r){i[0>r?~r:r].length<2&&o.push(r)})})}),o=r(t,o),(n=o.length)>1)for(var a,s=u(e[0][0]),f=0;f<n;++f)if(s===u(o[f])){a=o[0],o[0]=o[f],o[f]=a;break}return o})}}function u(r,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return i(r,n)})}:i(r,n)}function i(r,n){var t={type:"Feature",id:n.id,properties:n.properties||{},geometry:a(r,n)};return null==n.id&&delete t.id,t}function a(r,n){function t(r,n){n.length&&n.pop();for(var t,e=c[0>r?~r:r],o=0,u=e.length;u>o;++o)n.push(t=e[o].slice()),f(t,o);0>r&&s(n,u)}function e(r){return r=r.slice(),f(r,0),r}function o(r){for(var n=[],e=0,o=r.length;o>e;++e)t(r[e],n);return n.length<2&&n.push(n[0].slice()),n}function u(r){for(var n=o(r);n.length<4;)n.push(n[0].slice());return n}function i(r){return r.map(u)}function a(r){var n=r.type;return"GeometryCollection"===n?{type:n,geometries:r.geometries.map(a)}:n in p?{type:n,coordinates:p[n](r)}:null}var f=g(r.transform),c=r.arcs,p={Point:function(r){return e(r.coordinates)},MultiPoint:function(r){return r.coordinates.map(e)},LineString:function(r){return o(r.arcs)},MultiLineString:function(r){return r.arcs.map(o)},Polygon:function(r){return i(r.arcs)},MultiPolygon:function(r){return r.arcs.map(i)}};return a(n)}function s(r,n){for(var t,e=r.length,o=e-n;o<--e;)t=r[o],r[o++]=r[e],r[e]=t}function f(r,n){for(var t=0,e=r.length;e>t;){var o=t+e>>>1;r[o]<n?t=o+1:e=o}return t}function c(r){function n(r,n){r.forEach(function(r){0>r&&(r=~r);var t=o[r];t?t.push(n):o[r]=[n]})}function t(r,t){r.forEach(function(r){n(r,t)})}function e(r,n){"GeometryCollection"===r.type?r.geometries.forEach(function(r){e(r,n)}):r.type in i&&i[r.type](r.arcs,n)}var o={},u=r.map(function(){return[]}),i={LineString:n,MultiLineString:t,Polygon:t,MultiPolygon:function(r,n){r.forEach(function(r){t(r,n)})}};r.forEach(e);for(var a in o)for(var s=o[a],c=s.length,p=0;c>p;++p)for(var l=p+1;c>l;++l){var d,m=s[p],v=s[l];(d=u[m])[a=f(d,v)]!==v&&d.splice(a,0,v),(d=u[v])[a=f(d,m)]!==m&&d.splice(a,0,m)}return u}function p(r,n){function t(r){u.remove(r),r[1][2]=n(r),u.push(r)}var e=g(r.transform),o=h(r.transform),u=v();return n||(n=d),r.arcs.forEach(function(r){for(var i,a,s=[],f=0,c=0,p=r.length;p>c;++c)a=r[c],e(r[c]=[a[0],a[1],1/0],c);for(var c=1,p=r.length-1;p>c;++c)i=r.slice(c-1,c+2),i[1][2]=n(i),s.push(i),u.push(i);for(var c=0,p=s.length;p>c;++c)i=s[c],i.previous=s[c-1],i.next=s[c+1];for(;i=u.pop();){var l=i.previous,d=i.next;i[1][2]<f?i[1][2]=f:f=i[1][2],l&&(l.next=d,l[2]=i[2],t(l)),d&&(d.previous=l,d[0]=i[0],t(d))}r.forEach(o)}),r}function l(r){for(var n,t=-1,e=r.length,o=r[e-1],u=0;++t<e;)n=o,o=r[t],u+=n[0]*o[1]-n[1]*o[0];return.5*u}function d(r){var n=r[0],t=r[1],e=r[2];return Math.abs((n[0]-e[0])*(t[1]-n[1])-(n[0]-t[0])*(e[1]-n[1]))}function m(r,n){return r[1][2]-n[1][2]}function v(){function r(r,n){for(;n>0;){var t=(n+1>>1)-1,o=e[t];if(m(r,o)>=0)break;e[o._=n]=o,e[r._=n=t]=r}}function n(r,n){for(;;){var t=n+1<<1,u=t-1,i=n,a=e[i];if(o>u&&m(e[u],a)<0&&(a=e[i=u]),o>t&&m(e[t],a)<0&&(a=e[i=t]),i===n)break;e[a._=n]=a,e[r._=n=i]=r}}var t={},e=[],o=0;return t.push=function(n){return r(e[n._=o]=n,o++),o},t.pop=function(){if(!(0>=o)){var r,t=e[0];return--o>0&&(r=e[o],n(e[r._=0]=r,0)),t}},t.remove=function(t){var u,i=t._;if(e[i]===t)return i!==--o&&(u=e[o],(m(u,t)<0?r:n)(e[u._=i]=u,i)),i},t}function g(r){if(!r)return y;var n,t,e=r.scale[0],o=r.scale[1],u=r.translate[0],i=r.translate[1];return function(r,a){a||(n=t=0),r[0]=(n+=r[0])*e+u,r[1]=(t+=r[1])*o+i}}function h(r){if(!r)return y;var n,t,e=r.scale[0],o=r.scale[1],u=r.translate[0],i=r.translate[1];return function(r,a){a||(n=t=0);var s=(r[0]-u)/e|0,f=(r[1]-i)/o|0;r[0]=s-n,r[1]=f-t,n=s,t=f}}function y(){}var M={version:"1.6.18",mesh:function(r){return a(r,e.apply(this,arguments))},meshArcs:e,merge:function(r){return a(r,o.apply(this,arguments))},mergeArcs:o,feature:u,neighbors:c,presimplify:p};"function"==typeof define&&define.amd?define(M):"object"==typeof t&&t.exports?t.exports=M:this.topojson=M}()},{}]},{},[13]);