<!DOCTYPE html>
<html>
<head>
  <style type="text/css">
    html, body, #mymap {
      height: 100%;
      margin: 0;
    }

    #mymap {
      float: left;
      width: 700px;
      height: 500px;
    }

    pre {
      float: left;
    }
  </style>
</head>
<body>

<h4><a href="#" class="single">Update Single Feature (Select Nevada & Colorado)</a></h4>
<h4><a href="#" class="choro">Show  Census choropleth Data </a></h4>

<div id="mymap"></div>

<script src="../node_modules/jquery/dist/jquery.js"></script>
<script src="../dist/map-tools.js"></script>
<script>

  var map = new GMP({
    id: 'mymap',
    lat: 35,
    lng: -105,
    zoom: 4
    //mapTypeId: google.maps.MapTypeId.ROADMAP
  }, function (err, instance) {
    // topojson data example with data, (http://eric.clst.org/Stuff/USGeoJSON)
    $.getJSON('./json/us-country.json', function (data) {
      map.addTopoJson(data, [{
        object: 'us_country',
        style: {
          strokeColor: '#2c2c2c',
          strokeWeight: 0.5,
          fillOpacity: 0
        },
        filters: ['NAME']
      }]);
    });

  });


  $(function() {

    $('.single').click(function (e) {
      var feature1 = map.json.filter.NAME.filter('Colorado').top(1)[0];
      var feature2 = map.json.filter.NAME.filter('Nevada').top(1)[0];
      map.updateFeature([feature1,feature2], {style: {fillOpacity: 0.4, fillColor:'black', strokeColor: 'black'}});
      e.preventDefault();
    });

    $('.choro').click(function (e) {
      var color = function() {
        // Simple choropleth function based on the CENSUSAREA data
        var value = (this.data.CENSUSAREA/570640.95);
        var alpha = 5;
        var h = 210,
        s = 100,
        l = (Math.pow((1 - value), alpha) * 50)+50; // this is just to increase the difference on the data for much different color

       return {
          fillColor: 'hsl('+h+','+s+'%,'+l+'%)',
          fillOpacity:0.7
        }

      };
      map.updateFeature(Object.keys(GMP.maps.mymap.json.all).map(function(k) { return GMP.maps.mymap.json.all[k] }), {style: color});
      e.preventDefault();
    });

  });
</script>

<pre>
$.getJSON('./json/us-country.json', function (data) {
map.addTopoJson(data, [{object: 'us_country',
        style: {
          strokeColor: '#2c2c2c',
          strokeWeight: 0.5,
          fillOpacity: 0
        },
        filters: ['NAME']
      }]);
    });
  ...
  var feature1 = map.json.filter.NAME.filter('Colorado').top(1)[0];
  var feature2 = map.json.filter.NAME.filter('Nevada').top(1)[0];
  var options = {
    style:{
      fillOpacity: 0.4,
      fillColor:'black',
      strokeColor: 'black'
    }
  };
  map.updateFeature([feature1,feature2], options);
</pre>
</body>
</html>
