<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<style>
  html, body, #myMap {
    height: 100%;
    margin: 0px;
    padding: 0px;
  }

  #myMap {
    width: 800px;
    height: 500px;
  }
</style>
<body>
<script src="../dist/gmplus.js"></script>
<script>
  var map = new GMP({
    id: 'myMap',
    lat: 41.3833,
    lng: 2.1833,
    zoom: 12
  }, function (err, instance) {
    if (!err) {
      addMarkers();
    }
  });



  function addMarkers() {

    map.addGroup('places', {visible: false});

    var places = [{
      lat: 41.387220,
      lng: 2.169983,
      title: 'Plaça Catalunya'
    },
      {
        lat: 41.4036,
        lng: 2.1744,
        title: 'Sagrada Familia'
      },
      {
        lat: 41.395571,
        lng: 2.161961,
        title: 'Casa Milà'
      },
      {
        lat: 41.385231,
        lng: 2.180893,
        title: 'Picasso Museum'
      }
    ];

    map.addMarker(places, {group: 'places'});

    map.addGroup('parks', {visible: true});

    var parks = [
      {
        lat: 41.414724,
        lng: 2.152646,
        title: 'Parc Guell'
      },
      {
        lat: 41.389483,
        lng: 2.186650,
        title: 'Ciütadella Park'
      },
      {
        lat: 41.420384,
        lng: 2.167424,
        title: 'Park del Guinardó'
      }
    ]

    map.addMarker(parks, {group: 'parks'});

  }

  var placesVisible = false;
  var parksVisible  = true;

  function myHandler(e) {
    e = e || window.event;
    var target;
    target = e.target || e.srcElement;

    if (target.className.match(/\bplaces\b/)) {
      placesVisible = !placesVisible;
      map.updateGroup('places', {visible: placesVisible});
    }

    if (target.className.match(/\bparks\b/)) {
      parksVisible = !parksVisible;
      map.updateGroup('parks', {visible: parksVisible});
    }

    e.preventDefault();
    return false;
  }

  if (document.body.addEventListener) {
    document.body.addEventListener('click', myHandler, false);
  } else {
    document.body.attachEvent('onclick', myHandler);
  }

</script>
<div><h4><a href="#" class="places">Click to toggle Markers visibility Group: Places</a></h4></div>
<div><h4><a href="#" class="parks">Click to toggle Markers visibility Group: Parks</a></h4></div>
<div id="myMap"></div>

</body>
</html>
